<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Admin Dashboard</title>

    <!-- GOOGLE FONTS -->
    <link href="https://fonts.googleapis.com/css?family=Karla:400,700|Roboto" rel="stylesheet">
    <link href="plugins/material/css/materialdesignicons.min.css" rel="stylesheet" />
    <link href="plugins/simplebar/simplebar.css" rel="stylesheet" />

    <!-- PLUGINS CSS STYLE -->
    <link href="plugins/nprogress/nprogress.css" rel="stylesheet" />


    <link href="plugins/prism/prism.css" rel="stylesheet" />



    <link href="plugins/DataTables/DataTables-1.10.18/css/jquery.dataTables.min.css" rel="stylesheet" />




    <!-- MONO CSS -->
    <link id="main-css-href" rel="stylesheet" href="css/style.css" />

    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="plugins/nprogress/nprogress.js"></script>
</head>


<body class="navbar-fixed sidebar-fixed" id="body">
<script>
    NProgress.configure({ showSpinner: false });
    NProgress.start();
</script>



<!-- ====================================
——— WRAPPER
===================================== -->
<div class="wrapper">


    <!-- ====================================
      ——— LEFT SIDEBAR WITH OUT FOOTER
    ===================================== -->
    <aside class="left-sidebar sidebar-dark" id="left-sidebar">
        <div id="sidebar" class="sidebar sidebar-with-footer">
            <!-- Aplication Brand -->
            <div class="app-brand">
                <a href="/dashboard">
                    <span class="brand-name">ADMIN DASHBOARD</span>
                </a>
            </div>
            <!-- begin sidebar scrollbar -->
            <div class="sidebar-left" data-simplebar style="height: 100%;">
                <!-- sidebar menu -->
                <ul class="nav sidebar-inner" id="sidebar-menu">

                    <li
                    >
                        <a class="sidenav-item-link" href="/dashboard">
                            <i class="mdi mdi-briefcase-account-outline"></i>
                            <span class="nav-text">Dashboard</span>
                        </a>
                    </li>

                    <li  class="has-sub" >
                        <a class="sidenav-item-link" href="javascript:void(0)" data-toggle="collapse" data-target="#email"
                           aria-expanded="false" aria-controls="email">
                            <i class="mdi mdi-email"></i>
                            <span class="nav-text">G.Tontines</span> <b class="caret"></b>
                        </a>
                        <ul  class="collapse"  id="email"
                             data-parent="#sidebar-menu">
                            <div class="sub-menu">
                                <li >
                                    <a class="sidenav-item-link" href="/tontines">
                                        <span class="nav-text">Liste des Tontines</span>
                                    </a>
                                </li>
                                <li >
                                    <a class="sidenav-item-link" href="/ajouterTontine">
                                        <span class="nav-text">Ajouter Une Tontine</span>
                                    </a>
                                </li>
                            </div>
                        </ul>
                    </li>

                    <li  class="has-sub" >
                        <a class="sidenav-item-link" href="javascript:void(0)" data-toggle="collapse" data-target="#DemandeJointures"
                           aria-expanded="false" aria-controls="email">
                            <i class="mdi mdi-email"></i>
                            <span class="nav-text">G.DemandeJointures</span> <b class="caret"></b>
                        </a>
                        <ul  class="collapse"  id="DemandeJointures"
                             data-parent="#sidebar-menu">
                            <div class="sub-menu">

                                <li >
                                    <a class="sidenav-item-link" href="/demandesJointure">
                                        <span class="nav-text">Liste des demandes</span>
                                    </a>
                                </li>

                                <li >
                                    <a class="sidenav-item-link" href="/demandesJointureTraitees">
                                        <span class="nav-text">Liste des demandes Traitees</span>
                                    </a>
                                </li>

                            </div>
                        </ul>
                    </li>

                    <li  class="has-sub" >
                        <a class="sidenav-item-link" href="javascript:void(0)" data-toggle="collapse" data-target="#DemandeTontines"
                           aria-expanded="false" aria-controls="email">
                            <i class="mdi mdi-email"></i>
                            <span class="nav-text">G.DemandeTontines</span> <b class="caret"></b>
                        </a>
                        <ul  class="collapse"  id="DemandeTontines"
                             data-parent="#sidebar-menu">
                            <div class="sub-menu">

                                <li >
                                    <a class="sidenav-item-link" href="/demandesTontine">
                                        <span class="nav-text">Liste des demandes</span>
                                    </a>
                                </li>


                                <li >
                                    <a class="sidenav-item-link" href="/demandesTontineRefusees">
                                        <span class="nav-text">Liste des demandes Refusées</span>
                                    </a>
                                </li>
                            </div>
                        </ul>
                    </li>

                    <li  class="has-sub" >
                        <a class="sidenav-item-link" href="javascript:void(0)" data-toggle="collapse" data-target="#Utilisateurs"
                           aria-expanded="false" aria-controls="email">
                            <i class="mdi mdi-email"></i>
                            <span class="nav-text">G.Utilisateurs</span> <b class="caret"></b>
                        </a>
                        <ul  class="collapse"  id="Utilisateurs"
                             data-parent="#sidebar-menu">
                            <div class="sub-menu">

                                <li >
                                    <a class="sidenav-item-link" href="/utilisateurs">
                                        <span class="nav-text">Liste des utilisateurs</span>
                                    </a>
                                </li>

                                <li >
                                    <a class="sidenav-item-link" href="/groupes">
                                        <span class="nav-text">Liste des groupes</span>
                                    </a>
                                </li>

                            </div>
                        </ul>
                    </li>

                </ul>

            </div>

        </div>
    </aside>



    <!-- ====================================
    ——— PAGE WRAPPER
    ===================================== -->
    <div class="page-wrapper">

        <!-- Header -->
        <header class="main-header" id="header">
            <nav class="navbar navbar-expand-lg navbar-light" id="navbar">
                <!-- Sidebar toggle button -->
                <button id="sidebar-toggler" class="sidebar-toggle">
                    <span class="sr-only">Toggle navigation</span>
                </button>

                <div class="navbar-right ">
                    <ul class="nav navbar-nav">
                        <!-- User Account -->
                        <li class="dropdown user-menu">
                            <button class="dropdown-toggle nav-link" data-toggle="dropdown">
                                <img src="images/user/user-xs-01.jpg" class="user-image rounded-circle" alt="User Image" />
                                <span class="d-none d-lg-inline-block">ADMIN</span>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-right">
                                <li class="dropdown-footer">
                                    <a class="dropdown-link-item" href="/logout"> <i class="mdi mdi-logout"></i>Se Deconnecter</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </nav>


        </header>

        <!-- ====================================
        ——— CONTENT WRAPPER
        ===================================== -->
        <div class="content-wrapper">
            <div class="content"><!-- For Components documentaion -->
                <!-- Products Inventory -->
                <div class="card card-default">
                    <div class="card-header">
                        <h2>Liste des Tontines</h2>
                       <div th:replace="~{layouts/alert/success}"></div>
                        <div th:replace="~{layouts/alert/danger}"></div>
                    </div>
                    <div class="card-body">
                        <div class="collapse" id="collapse-data-tables">
                        </div>
                        <table id="productsTable" class="table table-hover table-product" style="width:100%">
                            <thead>
                            <tr>
                                <th>Nom</th>
                                <th>Date_Debut</th>
                                <th>Date_Fin</th>
                                <th>NbPlacesRestantes</th>
                                <th>Status</th>
                                <th>Opérations</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="tontine, iStat : ${tontines}">
                                <td th:text="${tontine.nom}"></td>
                                <td th:text="${tontine.dateDebut}"></td>
                                <td th:text="${tontine.dateFin}"></td>
                                <td th:text="${tontine.getMaxMembre()} - ${tontine.getMembreTontines().size()}" th:if="${tontine.getMembreTontines() != null}"></td>
                                <td th:text="${tontine.statutTontine}"></td>
                                <td>
                                    <a type="button" data-toggle="modal" title="Afficher Details Tontine" th:data-target="'#exampleModalaff' + ${tontine.id}" class="btn btn-primary">
                                        <span class="mdi mdi-eye"/>
                                    </a>
                                    <a type="button" data-toggle="modal" title="Changer Statut Tontine" th:data-target="'#exampleModaledit' + ${tontine.id}" class="btn btn-dark">
                                        <span class="mdi mdi-circle-edit-outline"/>
                                    </a>
                                    <button type="button" class="btn btn-danger" title="Supprimer Tontine" data-toggle="modal" th:data-target="'#exampleModal' + ${tontine.id}">
                                        <i class="mdi mdi-delete"></i>
                                    </button>
                                    <a th:href="@{/afficherMembres(tontineId=${tontine.id})}" title="Afficher Les Membres" class="btn btn-secondary"><i class="mdi mdi-wallet-membership"></i></a>
                                </td>

                    <!--                                Modal For Delete -->
                                <div class="modal fade" th:id="'exampleModal' + ${tontine.id}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                Veuillez Confirmer La Suppression de la Tontine avec le Nom "<b th:text="${tontine.nom}"></b>"
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
                                                <a th:href="@{/supprimer-tontine-{id}(id=${tontine.id})}" class="btn btn-primary" >Supprimer</a>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                            <!--Modal For Display Tontine -->
                                <div th:replace="~{admin/layouts/afficherTontine}"></div>

                                <!--Modal For Tontine Status Changing -->
                                <div th:replace="~{admin/layouts/changerStatut}"></div>
                            </tr>
                            </tbody>
                        </table>

                    </div>
                </div>
            </div>

        </div>

    </div>
</div>


<script src="plugins/jquery/jquery.min.js"></script>
<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="plugins/simplebar/simplebar.min.js"></script>
<script src="https://unpkg.com/hotkeys-js/dist/hotkeys.min.js"></script>



<script src="plugins/prism/prism.js"></script>



<script src="plugins/DataTables/DataTables-1.10.18/js/jquery.dataTables.min.js"></script>



<script src="plugins/apexcharts/apexcharts.js"></script>


<script src="js/mono.js"></script>
<script src="js/chart.js"></script>
<script src="js/map.js"></script>
<script src="js/custom.js"></script>




<!--  -->


</body>
</html>
